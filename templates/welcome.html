{% load static %}
<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
    <title>Welcome</title>
    <meta name='viewport'
        content='width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no' />
    <style>
        body {
            background-color: aquamarine;
        }
    </style>
</head>

<script type="text/javascript">
    window.history.forward();
    function noBack() {
        window.history.forward();
    }
</script>

<body onLoad="noBack();" onpageshow="if (event.persisted) noBack();" onUnload="">
<!-- <body> -->
    {% if messages %} {% for msg in messages %}
    <script>
        console.log("{{msg}}");
        if ("{{msg}}" == 0) {
            swal({
                "title": "Success",
                "text": "Account created",
                "icon": "success",
                "button": "Login"
            }).then(() => {
                history.back();
            });
        }
        else if ("{{msg}}" == 1) {
            swal({
                "title": "Alert",
                "text": "Username already exists",
                "icon": "warning",
                "button": "Go Back"
            }).then(() => {
                history.back();
            });
        }
        else if ("{{msg}}" == 2) {
            swal({
                "title": "Alert",
                "text": "Password doesn't match",
                "icon": "warning",
                "button": "Go Back"
            }).then((value) => {
                history.back();
            });
        }
        else if ("{{msg}}" == 3) {
            swal({
                "title": "Alert",
                "text": "User with this email already exists",
                "icon": "warning",
                "button": "Go Back"
            }).then((value) => {
                history.back();
            });
        }
        else if ("{{msg}}" == 4) {
            swal({
                "title": "Yayy",
                "text": "Logged in",
                "icon": "success",
                "button": "Proceed"
            }).then((value) => {
                history.back();
            });
        } else if ("{{msg}}" == 5) {
            swal({
                "title": "Alert",
                "text": "Wrong password",
                "icon": "warning",
                "button": "Go Back"
            }).then((value) => {
                history.back();
            });
        } else if ("{{msg}}" == 7) {
            swal({
                "title": "Alert",
                "text": "Please enter the correct password",
                "icon": "warning",
                "button": "Go Back"
            })
            // .then((value) => {
            //     history.back();
            // });
        }
        else if ("{{msg}}" == 8) {
            swal({
                "title": "Alert",
                "text": "Passwords don't match",
                "icon": "warning",
                "button": "Go Back"
            }).then((value) => {
                history.back();
            });
        }
    </script>
    {% endfor %} {% endif %}

    <h1>Welcome {{name}}</h1>
    <form action="change" method="POST">
        {% csrf_token %}
        <input type="password" placeholder="Old password" name="opswd">
        <input type="password" placeholder="New password" name="pswd">
        <input type="password" placeholder="Re-type new password" name="rpswd">
        <input type="submit" value="Submit">
    </form>
    <a href="logout"><input type="button" value="Logout"></a><br/>
    <a href="delete"><input type="button" value="Delete Account"></a>
</body>

</html>